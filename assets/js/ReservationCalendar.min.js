class ReservationCalendar{_defaultValues(){this.element="reservation-calendar",this.weekName=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],this.dayName="Dia",this.daySeparator=[{id:"M",name:"Manhã"},{id:"T",name:"Tarde"},{id:"N",name:"Noite"}],this.varNames={date:"date",event:"event",status:{name:"status",confirmed:"C",refused:"R",waiting:"W"},shift:"shift"},this.today=new Date}_overwriteValues(t){if("object"!=typeof t)throw new Error("Missing object parameters!");$.each(t,(t,a)=>{this[t]=a})}constructor(t=!1){this._defaultValues(),t&&this._overwriteValues(t),this._setUpCSS(),this._createStruct()}_setUpCSS(){let t='.dia-livre{background-color:#ebffe3}.dia-ocupado{background-color:#fffae3}.n-confirmado{position:relative}.n-confirmado::after{content:"";position:absolute;top:0;right:0;width:0;height:0;border-top:10px solid #ff3232;border-left:10px solid transparent}.y-confirmado{position:relative}.y-confirmado::after{content:"";position:absolute;top:0;right:0;width:0;height:0;border-top:10px solid green;border-left:10px solid transparent}.w-confirmado{position:relative}.w-confirmado::after{content:"";position:absolute;top:0;right:0;width:0;height:0;border-top:10px solid #ffc400;border-left:10px solid transparent}.dia-hoje{background-color:#afafaf}.dia-normal{background-color:#d3d3d3}.table td,.table th{padding:2px;font-size:14px;max-height:32px}.linha-dia{background-color:#c9c9c9}.linha-dia~td{text-align:right;padding-right:15px;font-weight:800;font-size:15px;background-color:#cacaca}th.linha-turno{padding:5px}.linha-turno~td{padding:5px;font-size:11px;line-height:13px;width:125px;max-width:125px;max-height:32px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}tr.table-separador{background-color:#e7e7e7}tr.table-separador td{padding:3px}@media (max-width:768px){.table-reserva{overflow-x:scroll;margin:0 15px}}.background-home{padding-bottom:0}#nav-box .container hr:first-child{border-color:transparent}*{font-family:Raleway,sans-serif}.table td,.table th{vertical-align:middle}',a=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");a.appendChild(e),e.type="text/css",e.styleSheet?e.styleSheet.cssText=css:e.appendChild(document.createTextNode(t))}_addColToStruct(t){let a="";return this.daySeparator.forEach(e=>{a+=`\n          <tr data-parent="${t}" data-turno="${e.id}"><th class="linha-turno" scope="row">${e.name}</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>\n          `}),a}_createStruct(){let t=`\n          <div class="table-reserva d-flex justify-content-md-center"><div><table class="table table-bordered text-center col-md-12 table-hover"><thead class="thead-dark"><tr><th scope="col"></th><th scope="col">${this.weekName[0]}</th><th scope="col">${this.weekName[1]}</th><th scope="col">${this.weekName[2]}</th><th scope="col">${this.weekName[3]}</th><th scope="col">${this.weekName[4]}</th><th scope="col">${this.weekName[5]}</th><th scope="col">${this.weekName[6]}</th></tr></thead><tbody><tr data-parent="1" class="tr-dia"><th id="semana-1" class="linha-dia" scope="row">${this.dayName}</th><td data-sem="0"></td><td data-sem="1"></td><td data-sem="2"></td><td data-sem="3"></td><td data-sem="4"></td><td data-sem="5"></td><td data-sem="6"></td></tr> ${this._addColToStruct(1)}<tr class="table-separador" data-separador="1"><th scope="row"></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr data-parent="2" class="tr-dia"><th id="semana-2" class="linha-dia" scope="row">${this.dayName}</th><td data-sem="0"></td><td data-sem="1"></td><td data-sem="2"></td><td data-sem="3"></td><td data-sem="4"></td><td data-sem="5"></td><td data-sem="6"></td></tr>${this._addColToStruct(2)}<tr class="table-separador" data-separador="2"><th scope="row"></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr data-parent="3" class="tr-dia"><th id="semana-3" class="linha-dia" scope="row">${this.dayName}</th><td data-sem="0"></td><td data-sem="1"></td><td data-sem="2"></td><td data-sem="3"></td><td data-sem="4"></td><td data-sem="5"></td><td data-sem="6"></td></tr>${this._addColToStruct(3)}<tr class="table-separador" data-separador="3"><th scope="row"></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr data-parent="4" class="tr-dia"><th id="semana-4" class="linha-dia" scope="row">${this.dayName}</th><td data-sem="0"></td><td data-sem="1"></td><td data-sem="2"></td><td data-sem="3"></td><td data-sem="4"></td><td data-sem="5"></td><td data-sem="6"></td></tr>${this._addColToStruct(4)}<tr class="table-separador" data-separador="4"><th scope="row"></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr data-parent="5" class="tr-dia"><th id="semana-5" class="linha-dia" scope="row">${this.dayName}</th><td data-sem="0"></td><td data-sem="1"></td><td data-sem="2"></td><td data-sem="3"></td><td data-sem="4"></td><td data-sem="5"></td><td data-sem="6"></td></tr>${this._addColToStruct(5)}<tr class="table-separador" data-separador="5"><th scope="row"></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr data-parent="6" class="tr-dia"><th id="semana-6" class="linha-dia" scope="row">${this.dayName}</th><td data-sem="0"></td><td data-sem="1"></td><td data-sem="2"></td><td data-sem="3"></td><td data-sem="4"></td><td data-sem="5"></td><td data-sem="6"></td></tr>${this._addColToStruct(6)}<tr class="table-separador" data-separador="6"><th scope="row"></th><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div>\n        `;$(`#${this.element}`).html(t),console.log("Struct created!")}_formatRealDate(t){let a=t.split("-"),e=a[0],d=a[1]-1,r=a[2];return{year:e,month:d,day:r}}_realDate(t){let a=this._formatRealDate(t),e=new Date(a.year,a.month,a.day);return e}_formatDaysInMonth(t){let a=t.split("-"),e=a[0],d=a[1],r=0;return{year:e,month:d,day:r}}_daysInMonth(t){let a=this._formatDaysInMonth(t),e=new Date(a.year,a.month,a.day).getDate();return e}_formatDayOne(t){let a=t.split("-"),e=a[0],d=a[1]-1,r=1;return{year:e,month:d,day:r}}_weekNumberDayOne(t){let a=this._formatDayOne(t),e=new Date(a.year,a.month,a.day).getDay();return e}_dayBefore(t,a){let e=this._formatDayOne(t),d=new Date(e.year,e.month,e.day-a).getDate();return d}_generateCalendar(t){this._createStruct();this._realDate(t);let a=this._daysInMonth(t),e=this._weekNumberDayOne(t),d=$(".tr-dia [data-sem]");$.each(d,(t,r)=>{if(t<e+a&&e<=t)d[t].innerText=t-e+1;else if(d[e+a-1].parentElement.getAttribute("data-parent")<r.parentElement.getAttribute("data-parent")){let t=r.parentElement.getAttribute("data-parent");return $(`[data-parent = ${t}]`).remove(),$(`[data-separador = ${t}]`).remove(),!1}})}extractDay(t){let a=t.split("-");return a[0]}_updateReservations(t){$.each(t,(t,a)=>{try{let t=this.extractDay(a[this.varNames.date]),e=$(`.tr-dia td:contains(${t})`).attr("data-sem"),d=$(`.tr-dia td:contains(${t})`).parent().attr("data-parent"),r=$(`[data-parent='${d}'][data-turno='${a[this.varNames.shift]}'] td`);switch(r[e].innerText=a[this.varNames.event],a[this.varNames.status.name]){case this.varNames.status.confirmed:r[e].classList.value="y-confirmado";break;case this.varNames.status.refused:r[e].classList.value="n-confirmado";break;case this.varNames.status.waiting:r[e].classList.value="w-confirmado";break;default:console.warn(`Default %c'status'%c value of %c'${a[this.varNames.event]}'%c is not correct!`,"font-weight: bold","font-weight: initial","font-weight: bold","font-weight: initial"),console.warn("Check the object: ",a)}}catch{console.warn(`Something went wrong when field 'shift[${a.shift}]' was being filled! Check if this field was setted.`)}})}updateCalendar(t,a){this._generateCalendar(a),this._updateReservations(t)}}